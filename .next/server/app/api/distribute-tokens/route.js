"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/distribute-tokens/route";
exports.ids = ["app/api/distribute-tokens/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdistribute-tokens%2Froute&page=%2Fapi%2Fdistribute-tokens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdistribute-tokens%2Froute.ts&appDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdistribute-tokens%2Froute&page=%2Fapi%2Fdistribute-tokens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdistribute-tokens%2Froute.ts&appDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Work_KnightVault_token_distribution_backend_app_api_distribute_tokens_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/distribute-tokens/route.ts */ \"(rsc)/./app/api/distribute-tokens/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/distribute-tokens/route\",\n        pathname: \"/api/distribute-tokens\",\n        filename: \"route\",\n        bundlePath: \"app/api/distribute-tokens/route\"\n    },\n    resolvedPagePath: \"D:\\\\Work\\\\KnightVault\\\\token-distribution-backend\\\\app\\\\api\\\\distribute-tokens\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Work_KnightVault_token_distribution_backend_app_api_distribute_tokens_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/distribute-tokens/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkaXN0cmlidXRlLXRva2VucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZGlzdHJpYnV0ZS10b2tlbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkaXN0cmlidXRlLXRva2VucyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDV29yayU1Q0tuaWdodFZhdWx0JTVDdG9rZW4tZGlzdHJpYnV0aW9uLWJhY2tlbmQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNXb3JrJTVDS25pZ2h0VmF1bHQlNUN0b2tlbi1kaXN0cmlidXRpb24tYmFja2VuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rva2VuLWRpc3RyaWJ1dGlvbi1mcm9udGVuZC8/Yjc3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxXb3JrXFxcXEtuaWdodFZhdWx0XFxcXHRva2VuLWRpc3RyaWJ1dGlvbi1iYWNrZW5kXFxcXGFwcFxcXFxhcGlcXFxcZGlzdHJpYnV0ZS10b2tlbnNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Rpc3RyaWJ1dGUtdG9rZW5zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZGlzdHJpYnV0ZS10b2tlbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2Rpc3RyaWJ1dGUtdG9rZW5zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcV29ya1xcXFxLbmlnaHRWYXVsdFxcXFx0b2tlbi1kaXN0cmlidXRpb24tYmFja2VuZFxcXFxhcHBcXFxcYXBpXFxcXGRpc3RyaWJ1dGUtdG9rZW5zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2Rpc3RyaWJ1dGUtdG9rZW5zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdistribute-tokens%2Froute&page=%2Fapi%2Fdistribute-tokens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdistribute-tokens%2Froute.ts&appDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/distribute-tokens/route.ts":
/*!********************************************!*\
  !*** ./app/api/distribute-tokens/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/tokenService */ \"(rsc)/./lib/tokenService.ts\");\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Check if it's a single recipient (backward compatibility) or multiple recipients\n        if (body.recipients && Array.isArray(body.recipients)) {\n            // Multiple recipients\n            const { recipients } = body;\n            if (!recipients || recipients.length === 0) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: \"No recipients provided\"\n                }, {\n                    status: 400\n                });\n            }\n            // Validate all recipients\n            for(let i = 0; i < recipients.length; i++){\n                const recipient = recipients[i];\n                if (!recipient.name || !recipient.email || !recipient.id || !recipient.wallet || !recipient.hrsWorked) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        success: false,\n                        error: `Missing required fields for recipient ${i + 1}: name, email, id, wallet, hrsWorked`\n                    }, {\n                        status: 400\n                    });\n                }\n                const hours = parseFloat(recipient.hrsWorked);\n                if (isNaN(hours) || hours <= 0) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        success: false,\n                        error: `Invalid hours worked for recipient ${i + 1} (${recipient.name}). Must be a positive number.`\n                    }, {\n                        status: 400\n                    });\n                }\n            }\n            console.log(`Distributing tokens to ${recipients.length} recipients`);\n            const results = await (0,_lib_tokenService__WEBPACK_IMPORTED_MODULE_1__.distributeTokensBulk)(recipients);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                message: `Tokens distributed successfully to ${recipients.length} recipients`,\n                data: {\n                    totalRecipients: recipients.length,\n                    successfulDistributions: results.filter((r)=>r.success).length,\n                    failedDistributions: results.filter((r)=>!r.success).length,\n                    results: results\n                }\n            });\n        } else {\n            // Single recipient (backward compatibility)\n            const { name, email, id, walletAddress, hrsWorked } = body;\n            if (!name || !email || !id || !walletAddress || !hrsWorked) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: \"Missing required fields: name, email, id, walletAddress, hrsWorked\"\n                }, {\n                    status: 400\n                });\n            }\n            const hours = parseFloat(hrsWorked);\n            if (isNaN(hours) || hours <= 0) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: \"Invalid hours worked. Must be a positive number.\"\n                }, {\n                    status: 400\n                });\n            }\n            const tokensToDistribute = Math.floor(hours);\n            console.log(`Distributing ${tokensToDistribute} tokens to ${walletAddress} for ${hours} hours worked`);\n            const transactionResult = await (0,_lib_tokenService__WEBPACK_IMPORTED_MODULE_1__.distributeTokens)(walletAddress, tokensToDistribute, {\n                name,\n                email,\n                id,\n                hrsWorked: hours\n            });\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                message: \"Tokens distributed successfully\",\n                data: {\n                    recipient: {\n                        name,\n                        email,\n                        id,\n                        walletAddress\n                    },\n                    distribution: {\n                        hoursWorked: hours,\n                        tokensDistributed: tokensToDistribute,\n                        rate: \"1 token per hour\"\n                    },\n                    transaction: transactionResult\n                }\n            });\n        }\n    } catch (error) {\n        console.error(\"Token distribution error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to distribute tokens\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Rpc3RyaWJ1dGUtdG9rZW5zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1RDtBQUNvQjtBQUVwRSxlQUFlRyxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNRCxRQUFRRSxJQUFJO1FBRS9CLG1GQUFtRjtRQUNuRixJQUFJRCxLQUFLRSxVQUFVLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0osS0FBS0UsVUFBVSxHQUFHO1lBQ3JELHNCQUFzQjtZQUN0QixNQUFNLEVBQUVBLFVBQVUsRUFBRSxHQUFHRjtZQUV2QixJQUFJLENBQUNFLGNBQWNBLFdBQVdHLE1BQU0sS0FBSyxHQUFHO2dCQUMxQyxPQUFPVixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO29CQUN2QkssU0FBUztvQkFDVEMsT0FBTztnQkFDVCxHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1lBQ25CO1lBRUEsMEJBQTBCO1lBQzFCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJUCxXQUFXRyxNQUFNLEVBQUVJLElBQUs7Z0JBQzFDLE1BQU1DLFlBQVlSLFVBQVUsQ0FBQ08sRUFBRTtnQkFDL0IsSUFBSSxDQUFDQyxVQUFVQyxJQUFJLElBQUksQ0FBQ0QsVUFBVUUsS0FBSyxJQUFJLENBQUNGLFVBQVVHLEVBQUUsSUFBSSxDQUFDSCxVQUFVSSxNQUFNLElBQUksQ0FBQ0osVUFBVUssU0FBUyxFQUFFO29CQUNyRyxPQUFPcEIsa0ZBQVlBLENBQUNNLElBQUksQ0FBQzt3QkFDdkJLLFNBQVM7d0JBQ1RDLE9BQU8sQ0FBQyxzQ0FBc0MsRUFBRUUsSUFBSSxFQUFFLG9DQUFvQyxDQUFDO29CQUM3RixHQUFHO3dCQUFFRCxRQUFRO29CQUFJO2dCQUNuQjtnQkFFQSxNQUFNUSxRQUFRQyxXQUFXUCxVQUFVSyxTQUFTO2dCQUM1QyxJQUFJRyxNQUFNRixVQUFVQSxTQUFTLEdBQUc7b0JBQzlCLE9BQU9yQixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO3dCQUN2QkssU0FBUzt3QkFDVEMsT0FBTyxDQUFDLG1DQUFtQyxFQUFFRSxJQUFJLEVBQUUsRUFBRSxFQUFFQyxVQUFVQyxJQUFJLENBQUMsNkJBQTZCLENBQUM7b0JBQ3RHLEdBQUc7d0JBQUVILFFBQVE7b0JBQUk7Z0JBQ25CO1lBQ0Y7WUFFQVcsUUFBUUMsR0FBRyxDQUFDLENBQUMsdUJBQXVCLEVBQUVsQixXQUFXRyxNQUFNLENBQUMsV0FBVyxDQUFDO1lBQ3BFLE1BQU1nQixVQUFVLE1BQU14Qix1RUFBb0JBLENBQUNLO1lBRTNDLE9BQU9QLGtGQUFZQSxDQUFDTSxJQUFJLENBQUM7Z0JBQ3ZCSyxTQUFTO2dCQUNUZ0IsU0FBUyxDQUFDLG1DQUFtQyxFQUFFcEIsV0FBV0csTUFBTSxDQUFDLFdBQVcsQ0FBQztnQkFDN0VrQixNQUFNO29CQUNKQyxpQkFBaUJ0QixXQUFXRyxNQUFNO29CQUNsQ29CLHlCQUF5QkosUUFBUUssTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFckIsT0FBTyxFQUFFRCxNQUFNO29CQUM5RHVCLHFCQUFxQlAsUUFBUUssTUFBTSxDQUFDQyxDQUFBQSxJQUFLLENBQUNBLEVBQUVyQixPQUFPLEVBQUVELE1BQU07b0JBQzNEZ0IsU0FBU0E7Z0JBQ1g7WUFDRjtRQUVGLE9BQU87WUFDTCw0Q0FBNEM7WUFDNUMsTUFBTSxFQUFFVixJQUFJLEVBQUVDLEtBQUssRUFBRUMsRUFBRSxFQUFFZ0IsYUFBYSxFQUFFZCxTQUFTLEVBQUUsR0FBR2Y7WUFFdEQsSUFBSSxDQUFDVyxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDZ0IsaUJBQWlCLENBQUNkLFdBQVc7Z0JBQzFELE9BQU9wQixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO29CQUN2QkssU0FBUztvQkFDVEMsT0FBTztnQkFDVCxHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1lBQ25CO1lBRUEsTUFBTVEsUUFBUUMsV0FBV0Y7WUFDekIsSUFBSUcsTUFBTUYsVUFBVUEsU0FBUyxHQUFHO2dCQUM5QixPQUFPckIsa0ZBQVlBLENBQUNNLElBQUksQ0FBQztvQkFDdkJLLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1QsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNuQjtZQUVBLE1BQU1zQixxQkFBcUJDLEtBQUtDLEtBQUssQ0FBQ2hCO1lBRXRDRyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUVVLG1CQUFtQixXQUFXLEVBQUVELGNBQWMsS0FBSyxFQUFFYixNQUFNLGFBQWEsQ0FBQztZQUNyRyxNQUFNaUIsb0JBQW9CLE1BQU1yQyxtRUFBZ0JBLENBQUNpQyxlQUFlQyxvQkFBb0I7Z0JBQ2xGbkI7Z0JBQ0FDO2dCQUNBQztnQkFDQUUsV0FBV0M7WUFDYjtZQUVBLE9BQU9yQixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUN2QkssU0FBUztnQkFDVGdCLFNBQVM7Z0JBQ1RDLE1BQU07b0JBQ0piLFdBQVc7d0JBQ1RDO3dCQUNBQzt3QkFDQUM7d0JBQ0FnQjtvQkFDRjtvQkFDQUssY0FBYzt3QkFDWkMsYUFBYW5CO3dCQUNib0IsbUJBQW1CTjt3QkFDbkJPLE1BQU07b0JBQ1I7b0JBQ0FDLGFBQWFMO2dCQUNmO1lBQ0Y7UUFDRjtJQUVGLEVBQUUsT0FBTzFCLE9BQVk7UUFDbkJZLFFBQVFaLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9aLGtGQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJLLFNBQVM7WUFDVEMsT0FBTztZQUNQZ0MsU0FBU2hDLE1BQU1lLE9BQU87UUFDeEIsR0FBRztZQUFFZCxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rva2VuLWRpc3RyaWJ1dGlvbi1mcm9udGVuZC8uL2FwcC9hcGkvZGlzdHJpYnV0ZS10b2tlbnMvcm91dGUudHM/NTEwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGRpc3RyaWJ1dGVUb2tlbnMsIGRpc3RyaWJ1dGVUb2tlbnNCdWxrIH0gZnJvbSAnQC9saWIvdG9rZW5TZXJ2aWNlJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIGl0J3MgYSBzaW5nbGUgcmVjaXBpZW50IChiYWNrd2FyZCBjb21wYXRpYmlsaXR5KSBvciBtdWx0aXBsZSByZWNpcGllbnRzXHJcbiAgICBpZiAoYm9keS5yZWNpcGllbnRzICYmIEFycmF5LmlzQXJyYXkoYm9keS5yZWNpcGllbnRzKSkge1xyXG4gICAgICAvLyBNdWx0aXBsZSByZWNpcGllbnRzXHJcbiAgICAgIGNvbnN0IHsgcmVjaXBpZW50cyB9ID0gYm9keVxyXG5cclxuICAgICAgaWYgKCFyZWNpcGllbnRzIHx8IHJlY2lwaWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6ICdObyByZWNpcGllbnRzIHByb3ZpZGVkJ1xyXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgYWxsIHJlY2lwaWVudHNcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNpcGllbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgcmVjaXBpZW50ID0gcmVjaXBpZW50c1tpXVxyXG4gICAgICAgIGlmICghcmVjaXBpZW50Lm5hbWUgfHwgIXJlY2lwaWVudC5lbWFpbCB8fCAhcmVjaXBpZW50LmlkIHx8ICFyZWNpcGllbnQud2FsbGV0IHx8ICFyZWNpcGllbnQuaHJzV29ya2VkKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcyBmb3IgcmVjaXBpZW50ICR7aSArIDF9OiBuYW1lLCBlbWFpbCwgaWQsIHdhbGxldCwgaHJzV29ya2VkYFxyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaG91cnMgPSBwYXJzZUZsb2F0KHJlY2lwaWVudC5ocnNXb3JrZWQpXHJcbiAgICAgICAgaWYgKGlzTmFOKGhvdXJzKSB8fCBob3VycyA8PSAwKSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3I6IGBJbnZhbGlkIGhvdXJzIHdvcmtlZCBmb3IgcmVjaXBpZW50ICR7aSArIDF9ICgke3JlY2lwaWVudC5uYW1lfSkuIE11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuYFxyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coYERpc3RyaWJ1dGluZyB0b2tlbnMgdG8gJHtyZWNpcGllbnRzLmxlbmd0aH0gcmVjaXBpZW50c2ApXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkaXN0cmlidXRlVG9rZW5zQnVsayhyZWNpcGllbnRzKVxyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBUb2tlbnMgZGlzdHJpYnV0ZWQgc3VjY2Vzc2Z1bGx5IHRvICR7cmVjaXBpZW50cy5sZW5ndGh9IHJlY2lwaWVudHNgLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHRvdGFsUmVjaXBpZW50czogcmVjaXBpZW50cy5sZW5ndGgsXHJcbiAgICAgICAgICBzdWNjZXNzZnVsRGlzdHJpYnV0aW9uczogcmVzdWx0cy5maWx0ZXIociA9PiByLnN1Y2Nlc3MpLmxlbmd0aCxcclxuICAgICAgICAgIGZhaWxlZERpc3RyaWJ1dGlvbnM6IHJlc3VsdHMuZmlsdGVyKHIgPT4gIXIuc3VjY2VzcykubGVuZ3RoLFxyXG4gICAgICAgICAgcmVzdWx0czogcmVzdWx0c1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBTaW5nbGUgcmVjaXBpZW50IChiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxyXG4gICAgICBjb25zdCB7IG5hbWUsIGVtYWlsLCBpZCwgd2FsbGV0QWRkcmVzcywgaHJzV29ya2VkIH0gPSBib2R5XHJcblxyXG4gICAgICBpZiAoIW5hbWUgfHwgIWVtYWlsIHx8ICFpZCB8fCAhd2FsbGV0QWRkcmVzcyB8fCAhaHJzV29ya2VkKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogbmFtZSwgZW1haWwsIGlkLCB3YWxsZXRBZGRyZXNzLCBocnNXb3JrZWQnXHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBob3VycyA9IHBhcnNlRmxvYXQoaHJzV29ya2VkKVxyXG4gICAgICBpZiAoaXNOYU4oaG91cnMpIHx8IGhvdXJzIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgaG91cnMgd29ya2VkLiBNdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyLidcclxuICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHRva2Vuc1RvRGlzdHJpYnV0ZSA9IE1hdGguZmxvb3IoaG91cnMpXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgRGlzdHJpYnV0aW5nICR7dG9rZW5zVG9EaXN0cmlidXRlfSB0b2tlbnMgdG8gJHt3YWxsZXRBZGRyZXNzfSBmb3IgJHtob3Vyc30gaG91cnMgd29ya2VkYClcclxuICAgICAgY29uc3QgdHJhbnNhY3Rpb25SZXN1bHQgPSBhd2FpdCBkaXN0cmlidXRlVG9rZW5zKHdhbGxldEFkZHJlc3MsIHRva2Vuc1RvRGlzdHJpYnV0ZSwge1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgaHJzV29ya2VkOiBob3Vyc1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdUb2tlbnMgZGlzdHJpYnV0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZWNpcGllbnQ6IHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB3YWxsZXRBZGRyZXNzXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZGlzdHJpYnV0aW9uOiB7XHJcbiAgICAgICAgICAgIGhvdXJzV29ya2VkOiBob3VycyxcclxuICAgICAgICAgICAgdG9rZW5zRGlzdHJpYnV0ZWQ6IHRva2Vuc1RvRGlzdHJpYnV0ZSxcclxuICAgICAgICAgICAgcmF0ZTogJzEgdG9rZW4gcGVyIGhvdXInXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uUmVzdWx0XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiBkaXN0cmlidXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZGlzdHJpYnV0ZSB0b2tlbnMnLFxyXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJkaXN0cmlidXRlVG9rZW5zIiwiZGlzdHJpYnV0ZVRva2Vuc0J1bGsiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwicmVjaXBpZW50cyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImkiLCJyZWNpcGllbnQiLCJuYW1lIiwiZW1haWwiLCJpZCIsIndhbGxldCIsImhyc1dvcmtlZCIsImhvdXJzIiwicGFyc2VGbG9hdCIsImlzTmFOIiwiY29uc29sZSIsImxvZyIsInJlc3VsdHMiLCJtZXNzYWdlIiwiZGF0YSIsInRvdGFsUmVjaXBpZW50cyIsInN1Y2Nlc3NmdWxEaXN0cmlidXRpb25zIiwiZmlsdGVyIiwiciIsImZhaWxlZERpc3RyaWJ1dGlvbnMiLCJ3YWxsZXRBZGRyZXNzIiwidG9rZW5zVG9EaXN0cmlidXRlIiwiTWF0aCIsImZsb29yIiwidHJhbnNhY3Rpb25SZXN1bHQiLCJkaXN0cmlidXRpb24iLCJob3Vyc1dvcmtlZCIsInRva2Vuc0Rpc3RyaWJ1dGVkIiwicmF0ZSIsInRyYW5zYWN0aW9uIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/distribute-tokens/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/tokenService.ts":
/*!*****************************!*\
  !*** ./lib/tokenService.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenService: () => (/* binding */ TokenService),\n/* harmony export */   distributeTokens: () => (/* binding */ distributeTokens),\n/* harmony export */   distributeTokensBulk: () => (/* binding */ distributeTokensBulk),\n/* harmony export */   getTokenService: () => (/* binding */ getTokenService)\n/* harmony export */ });\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/providers/provider-jsonrpc.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/wallet/wallet.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/contract/contract.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/address/checks.js\");\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ethers */ \"(rsc)/./node_modules/ethers/lib.esm/utils/units.js\");\n\nconst ERC20_ABI = [\n    \"function transfer(address to, uint256 amount) returns (bool)\",\n    \"function balanceOf(address account) view returns (uint256)\",\n    \"function decimals() view returns (uint8)\",\n    \"function symbol() view returns (string)\",\n    \"function name() view returns (string)\"\n];\nclass TokenService {\n    constructor(){\n        this.rpcUrl = process.env.RPC_URL || \"https://mainnet-rpc.kxcoscan.com\";\n        this.chainId = process.env.CHAIN_ID || \"8060\";\n        this.privateKey = process.env.PRIVATE_KEY || \"\";\n        this.tokenContractAddress = process.env.TOKEN_CONTRACT_ADDRESS || \"\";\n        if (!this.privateKey) {\n            throw new Error(\"PRIVATE_KEY environment variable is required\");\n        }\n        if (!this.tokenContractAddress) {\n            throw new Error(\"TOKEN_CONTRACT_ADDRESS environment variable is required\");\n        }\n        this.provider = new ethers__WEBPACK_IMPORTED_MODULE_0__.JsonRpcProvider(this.rpcUrl);\n        this.wallet = new ethers__WEBPACK_IMPORTED_MODULE_1__.Wallet(this.privateKey, this.provider);\n        this.tokenContract = new ethers__WEBPACK_IMPORTED_MODULE_2__.Contract(this.tokenContractAddress, ERC20_ABI, this.wallet);\n    }\n    async distributeTokens(recipientAddress, amount, metadata = {}) {\n        try {\n            console.log(`Starting token distribution to ${recipientAddress} for ${amount} tokens`);\n            if (!ethers__WEBPACK_IMPORTED_MODULE_3__.isAddress(recipientAddress)) {\n                throw new Error(\"Invalid recipient wallet address\");\n            }\n            const decimals = await this.tokenContract.decimals();\n            const tokenAmount = ethers__WEBPACK_IMPORTED_MODULE_4__.parseUnits(amount.toString(), decimals);\n            const balance = await this.tokenContract.balanceOf(this.wallet.address);\n            if (balance < tokenAmount) {\n                throw new Error(`Insufficient token balance. Required: ${amount}, Available: ${ethers__WEBPACK_IMPORTED_MODULE_4__.formatUnits(balance, decimals)}`);\n            }\n            const gasEstimate = await this.tokenContract.transfer.estimateGas(recipientAddress, tokenAmount);\n            const feeData = await this.provider.getFeeData();\n            const gasLimit = gasEstimate * 120n / 100n;\n            console.log(`Gas estimate: ${gasEstimate}, Gas limit: ${gasLimit}, Gas price: ${feeData.gasPrice}`);\n            const tx = await this.tokenContract.transfer(recipientAddress, tokenAmount, {\n                gasLimit: gasLimit,\n                gasPrice: feeData.gasPrice\n            });\n            console.log(`Transaction sent: ${tx.hash}`);\n            const receipt = await tx.wait();\n            console.log(`Transaction confirmed in block: ${receipt.blockNumber}`);\n            const explorerUrl = `https://kxcoscan.com/tx/${tx.hash}`;\n            return {\n                transactionHash: tx.hash,\n                blockNumber: receipt.blockNumber,\n                gasUsed: receipt.gasUsed.toString(),\n                gasPrice: feeData.gasPrice?.toString(),\n                status: receipt.status === 1 ? \"success\" : \"failed\",\n                explorerUrl: explorerUrl,\n                recipient: recipientAddress,\n                amount: amount,\n                tokenContract: this.tokenContractAddress,\n                network: \"Knightsbridge\",\n                chainId: this.chainId,\n                timestamp: new Date().toISOString(),\n                metadata: metadata\n            };\n        } catch (error) {\n            console.error(\"Token distribution failed:\", error);\n            throw new Error(`Token distribution failed: ${error.message}`);\n        }\n    }\n    async getTokenInfo() {\n        try {\n            const [name, symbol, decimals] = await Promise.all([\n                this.tokenContract.name(),\n                this.tokenContract.symbol(),\n                this.tokenContract.decimals()\n            ]);\n            return {\n                name,\n                symbol,\n                decimals: decimals.toString(),\n                contractAddress: this.tokenContractAddress,\n                network: \"Knightsbridge\",\n                chainId: this.chainId\n            };\n        } catch (error) {\n            console.error(\"Failed to get token info:\", error);\n            throw error;\n        }\n    }\n    async getWalletBalance(address) {\n        try {\n            const balance = await this.tokenContract.balanceOf(address);\n            const decimals = await this.tokenContract.decimals();\n            return ethers__WEBPACK_IMPORTED_MODULE_4__.formatUnits(balance, decimals);\n        } catch (error) {\n            console.error(\"Failed to get wallet balance:\", error);\n            throw error;\n        }\n    }\n    async distributeTokensBulk(recipients) {\n        const results = [];\n        console.log(`Starting bulk distribution to ${recipients.length} recipients`);\n        for(let i = 0; i < recipients.length; i++){\n            const recipient = recipients[i];\n            const tokensToDistribute = Math.floor(recipient.hrsWorked);\n            try {\n                console.log(`Processing recipient ${i + 1}/${recipients.length}: ${recipient.name}`);\n                const transactionResult = await this.distributeTokens(recipient.wallet, tokensToDistribute, {\n                    name: recipient.name,\n                    email: recipient.email,\n                    id: recipient.id,\n                    hrsWorked: recipient.hrsWorked\n                });\n                results.push({\n                    success: true,\n                    recipient: {\n                        name: recipient.name,\n                        email: recipient.email,\n                        id: recipient.id,\n                        wallet: recipient.wallet\n                    },\n                    distribution: {\n                        hoursWorked: recipient.hrsWorked,\n                        tokensDistributed: tokensToDistribute,\n                        rate: \"1 token per hour\"\n                    },\n                    transaction: transactionResult\n                });\n                console.log(`Successfully distributed ${tokensToDistribute} tokens to ${recipient.name}`);\n            } catch (error) {\n                console.error(`Failed to distribute tokens to ${recipient.name}:`, error);\n                results.push({\n                    success: false,\n                    recipient: {\n                        name: recipient.name,\n                        email: recipient.email,\n                        id: recipient.id,\n                        wallet: recipient.wallet\n                    },\n                    distribution: {\n                        hoursWorked: recipient.hrsWorked,\n                        tokensDistributed: 0,\n                        rate: \"1 token per hour\"\n                    },\n                    error: error.message\n                });\n            }\n        }\n        const successfulCount = results.filter((r)=>r.success).length;\n        const failedCount = results.filter((r)=>!r.success).length;\n        console.log(`Bulk distribution completed: ${successfulCount} successful, ${failedCount} failed`);\n        return results;\n    }\n}\n// Create a singleton instance\nlet tokenServiceInstance = null;\nfunction getTokenService() {\n    if (!tokenServiceInstance) {\n        tokenServiceInstance = new TokenService();\n    }\n    return tokenServiceInstance;\n}\nasync function distributeTokens(recipientAddress, amount, metadata = {}) {\n    const tokenService = getTokenService();\n    return await tokenService.distributeTokens(recipientAddress, amount, metadata);\n}\nasync function distributeTokensBulk(recipients) {\n    const tokenService = getTokenService();\n    return await tokenService.distributeTokensBulk(recipients);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPcEI7SUFDVDtBQUNGO0FBRUEsOEJBQThCO0FBQzlCLElBQUlxQix1QkFBNEM7QUFFekMsU0FBU0M7SUFDZCxJQUFJLENBQUNELHNCQUFzQjtRQUN6QkEsdUJBQXVCLElBQUl2RjtJQUM3QjtJQUNBLE9BQU91RjtBQUNUO0FBRU8sZUFBZXBFLGlCQUFpQkMsZ0JBQXdCLEVBQUVDLE1BQWMsRUFBRUMsV0FBZ0IsQ0FBQyxDQUFDO0lBQ2pHLE1BQU1tRSxlQUFlRDtJQUNyQixPQUFPLE1BQU1DLGFBQWF0RSxnQkFBZ0IsQ0FBQ0Msa0JBQWtCQyxRQUFRQztBQUN2RTtBQUVPLGVBQWUwQyxxQkFBcUJDLFVBQStGO0lBQ3hJLE1BQU13QixlQUFlRDtJQUNyQixPQUFPLE1BQU1DLGFBQWF6QixvQkFBb0IsQ0FBQ0M7QUFDakQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2tlbi1kaXN0cmlidXRpb24tZnJvbnRlbmQvLi9saWIvdG9rZW5TZXJ2aWNlLnRzPzM2M2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJ1xyXG5cclxuY29uc3QgRVJDMjBfQUJJID0gW1xyXG4gIFwiZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIHJldHVybnMgKGJvb2wpXCIsXHJcbiAgXCJmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBhY2NvdW50KSB2aWV3IHJldHVybnMgKHVpbnQyNTYpXCIsXHJcbiAgXCJmdW5jdGlvbiBkZWNpbWFscygpIHZpZXcgcmV0dXJucyAodWludDgpXCIsXHJcbiAgXCJmdW5jdGlvbiBzeW1ib2woKSB2aWV3IHJldHVybnMgKHN0cmluZylcIixcclxuICBcImZ1bmN0aW9uIG5hbWUoKSB2aWV3IHJldHVybnMgKHN0cmluZylcIlxyXG5dXHJcblxyXG5leHBvcnQgY2xhc3MgVG9rZW5TZXJ2aWNlIHtcclxuICBwcml2YXRlIHJwY1VybDogc3RyaW5nXHJcbiAgcHJpdmF0ZSBjaGFpbklkOiBzdHJpbmdcclxuICBwcml2YXRlIHByaXZhdGVLZXk6IHN0cmluZ1xyXG4gIHByaXZhdGUgdG9rZW5Db250cmFjdEFkZHJlc3M6IHN0cmluZ1xyXG4gIHByaXZhdGUgcHJvdmlkZXI6IGV0aGVycy5Kc29uUnBjUHJvdmlkZXJcclxuICBwcml2YXRlIHdhbGxldDogZXRoZXJzLldhbGxldFxyXG4gIHByaXZhdGUgdG9rZW5Db250cmFjdDogZXRoZXJzLkNvbnRyYWN0XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5ycGNVcmwgPSBwcm9jZXNzLmVudi5SUENfVVJMIHx8ICdodHRwczovL21haW5uZXQtcnBjLmt4Y29zY2FuLmNvbSdcclxuICAgIHRoaXMuY2hhaW5JZCA9IHByb2Nlc3MuZW52LkNIQUlOX0lEIHx8ICc4MDYwJ1xyXG4gICAgdGhpcy5wcml2YXRlS2V5ID0gcHJvY2Vzcy5lbnYuUFJJVkFURV9LRVkgfHwgJydcclxuICAgIHRoaXMudG9rZW5Db250cmFjdEFkZHJlc3MgPSBwcm9jZXNzLmVudi5UT0tFTl9DT05UUkFDVF9BRERSRVNTIHx8ICcnXHJcbiAgICBcclxuICAgIGlmICghdGhpcy5wcml2YXRlS2V5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUFJJVkFURV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXRoaXMudG9rZW5Db250cmFjdEFkZHJlc3MpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUT0tFTl9DT05UUkFDVF9BRERSRVNTIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnByb3ZpZGVyID0gbmV3IGV0aGVycy5Kc29uUnBjUHJvdmlkZXIodGhpcy5ycGNVcmwpXHJcbiAgICB0aGlzLndhbGxldCA9IG5ldyBldGhlcnMuV2FsbGV0KHRoaXMucHJpdmF0ZUtleSwgdGhpcy5wcm92aWRlcilcclxuICAgIHRoaXMudG9rZW5Db250cmFjdCA9IG5ldyBldGhlcnMuQ29udHJhY3QodGhpcy50b2tlbkNvbnRyYWN0QWRkcmVzcywgRVJDMjBfQUJJLCB0aGlzLndhbGxldClcclxuICB9XHJcblxyXG4gIGFzeW5jIGRpc3RyaWJ1dGVUb2tlbnMocmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCBhbW91bnQ6IG51bWJlciwgbWV0YWRhdGE6IGFueSA9IHt9KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgdG9rZW4gZGlzdHJpYnV0aW9uIHRvICR7cmVjaXBpZW50QWRkcmVzc30gZm9yICR7YW1vdW50fSB0b2tlbnNgKVxyXG5cclxuICAgICAgaWYgKCFldGhlcnMuaXNBZGRyZXNzKHJlY2lwaWVudEFkZHJlc3MpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlY2lwaWVudCB3YWxsZXQgYWRkcmVzcycpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRlY2ltYWxzID0gYXdhaXQgdGhpcy50b2tlbkNvbnRyYWN0LmRlY2ltYWxzKClcclxuICAgICAgY29uc3QgdG9rZW5BbW91bnQgPSBldGhlcnMucGFyc2VVbml0cyhhbW91bnQudG9TdHJpbmcoKSwgZGVjaW1hbHMpXHJcblxyXG4gICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy50b2tlbkNvbnRyYWN0LmJhbGFuY2VPZih0aGlzLndhbGxldC5hZGRyZXNzKVxyXG4gICAgICBpZiAoYmFsYW5jZSA8IHRva2VuQW1vdW50KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN1ZmZpY2llbnQgdG9rZW4gYmFsYW5jZS4gUmVxdWlyZWQ6ICR7YW1vdW50fSwgQXZhaWxhYmxlOiAke2V0aGVycy5mb3JtYXRVbml0cyhiYWxhbmNlLCBkZWNpbWFscyl9YClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZ2FzRXN0aW1hdGUgPSBhd2FpdCB0aGlzLnRva2VuQ29udHJhY3QudHJhbnNmZXIuZXN0aW1hdGVHYXMocmVjaXBpZW50QWRkcmVzcywgdG9rZW5BbW91bnQpXHJcbiAgICAgIGNvbnN0IGZlZURhdGEgPSBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldEZlZURhdGEoKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgZ2FzTGltaXQgPSBnYXNFc3RpbWF0ZSAqIDEyMG4gLyAxMDBuXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgR2FzIGVzdGltYXRlOiAke2dhc0VzdGltYXRlfSwgR2FzIGxpbWl0OiAke2dhc0xpbWl0fSwgR2FzIHByaWNlOiAke2ZlZURhdGEuZ2FzUHJpY2V9YClcclxuXHJcbiAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy50b2tlbkNvbnRyYWN0LnRyYW5zZmVyKHJlY2lwaWVudEFkZHJlc3MsIHRva2VuQW1vdW50LCB7XHJcbiAgICAgICAgZ2FzTGltaXQ6IGdhc0xpbWl0LFxyXG4gICAgICAgIGdhc1ByaWNlOiBmZWVEYXRhLmdhc1ByaWNlXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgVHJhbnNhY3Rpb24gc2VudDogJHt0eC5oYXNofWApXHJcblxyXG4gICAgICBjb25zdCByZWNlaXB0ID0gYXdhaXQgdHgud2FpdCgpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgVHJhbnNhY3Rpb24gY29uZmlybWVkIGluIGJsb2NrOiAke3JlY2VpcHQuYmxvY2tOdW1iZXJ9YClcclxuXHJcbiAgICAgIGNvbnN0IGV4cGxvcmVyVXJsID0gYGh0dHBzOi8va3hjb3NjYW4uY29tL3R4LyR7dHguaGFzaH1gXHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRyYW5zYWN0aW9uSGFzaDogdHguaGFzaCxcclxuICAgICAgICBibG9ja051bWJlcjogcmVjZWlwdC5ibG9ja051bWJlcixcclxuICAgICAgICBnYXNVc2VkOiByZWNlaXB0Lmdhc1VzZWQudG9TdHJpbmcoKSxcclxuICAgICAgICBnYXNQcmljZTogZmVlRGF0YS5nYXNQcmljZT8udG9TdHJpbmcoKSxcclxuICAgICAgICBzdGF0dXM6IHJlY2VpcHQuc3RhdHVzID09PSAxID8gJ3N1Y2Nlc3MnIDogJ2ZhaWxlZCcsXHJcbiAgICAgICAgZXhwbG9yZXJVcmw6IGV4cGxvcmVyVXJsLFxyXG4gICAgICAgIHJlY2lwaWVudDogcmVjaXBpZW50QWRkcmVzcyxcclxuICAgICAgICBhbW91bnQ6IGFtb3VudCxcclxuICAgICAgICB0b2tlbkNvbnRyYWN0OiB0aGlzLnRva2VuQ29udHJhY3RBZGRyZXNzLFxyXG4gICAgICAgIG5ldHdvcms6ICdLbmlnaHRzYnJpZGdlJyxcclxuICAgICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhXHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIGRpc3RyaWJ1dGlvbiBmYWlsZWQ6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gZGlzdHJpYnV0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRUb2tlbkluZm8oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBbbmFtZSwgc3ltYm9sLCBkZWNpbWFsc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgdGhpcy50b2tlbkNvbnRyYWN0Lm5hbWUoKSxcclxuICAgICAgICB0aGlzLnRva2VuQ29udHJhY3Quc3ltYm9sKCksXHJcbiAgICAgICAgdGhpcy50b2tlbkNvbnRyYWN0LmRlY2ltYWxzKClcclxuICAgICAgXSlcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBzeW1ib2wsXHJcbiAgICAgICAgZGVjaW1hbHM6IGRlY2ltYWxzLnRvU3RyaW5nKCksXHJcbiAgICAgICAgY29udHJhY3RBZGRyZXNzOiB0aGlzLnRva2VuQ29udHJhY3RBZGRyZXNzLFxyXG4gICAgICAgIG5ldHdvcms6ICdLbmlnaHRzYnJpZGdlJyxcclxuICAgICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWRcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCB0b2tlbiBpbmZvOicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0V2FsbGV0QmFsYW5jZShhZGRyZXNzOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLnRva2VuQ29udHJhY3QuYmFsYW5jZU9mKGFkZHJlc3MpXHJcbiAgICAgIGNvbnN0IGRlY2ltYWxzID0gYXdhaXQgdGhpcy50b2tlbkNvbnRyYWN0LmRlY2ltYWxzKClcclxuICAgICAgcmV0dXJuIGV0aGVycy5mb3JtYXRVbml0cyhiYWxhbmNlLCBkZWNpbWFscylcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgd2FsbGV0IGJhbGFuY2U6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IGVycm9yXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXN0cmlidXRlVG9rZW5zQnVsayhyZWNpcGllbnRzOiBBcnJheTx7bmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBpZDogc3RyaW5nLCB3YWxsZXQ6IHN0cmluZywgaHJzV29ya2VkOiBudW1iZXJ9Pikge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBTdGFydGluZyBidWxrIGRpc3RyaWJ1dGlvbiB0byAke3JlY2lwaWVudHMubGVuZ3RofSByZWNpcGllbnRzYClcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNpcGllbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHJlY2lwaWVudCA9IHJlY2lwaWVudHNbaV1cclxuICAgICAgY29uc3QgdG9rZW5zVG9EaXN0cmlidXRlID0gTWF0aC5mbG9vcihyZWNpcGllbnQuaHJzV29ya2VkKVxyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyByZWNpcGllbnQgJHtpICsgMX0vJHtyZWNpcGllbnRzLmxlbmd0aH06ICR7cmVjaXBpZW50Lm5hbWV9YClcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMuZGlzdHJpYnV0ZVRva2VucyhyZWNpcGllbnQud2FsbGV0LCB0b2tlbnNUb0Rpc3RyaWJ1dGUsIHtcclxuICAgICAgICAgIG5hbWU6IHJlY2lwaWVudC5uYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHJlY2lwaWVudC5lbWFpbCxcclxuICAgICAgICAgIGlkOiByZWNpcGllbnQuaWQsXHJcbiAgICAgICAgICBocnNXb3JrZWQ6IHJlY2lwaWVudC5ocnNXb3JrZWRcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgcmVjaXBpZW50OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHJlY2lwaWVudC5uYW1lLFxyXG4gICAgICAgICAgICBlbWFpbDogcmVjaXBpZW50LmVtYWlsLFxyXG4gICAgICAgICAgICBpZDogcmVjaXBpZW50LmlkLFxyXG4gICAgICAgICAgICB3YWxsZXQ6IHJlY2lwaWVudC53YWxsZXRcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBkaXN0cmlidXRpb246IHtcclxuICAgICAgICAgICAgaG91cnNXb3JrZWQ6IHJlY2lwaWVudC5ocnNXb3JrZWQsXHJcbiAgICAgICAgICAgIHRva2Vuc0Rpc3RyaWJ1dGVkOiB0b2tlbnNUb0Rpc3RyaWJ1dGUsXHJcbiAgICAgICAgICAgIHJhdGU6ICcxIHRva2VuIHBlciBob3VyJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvblJlc3VsdFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBkaXN0cmlidXRlZCAke3Rva2Vuc1RvRGlzdHJpYnV0ZX0gdG9rZW5zIHRvICR7cmVjaXBpZW50Lm5hbWV9YClcclxuICAgICAgICBcclxuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkaXN0cmlidXRlIHRva2VucyB0byAke3JlY2lwaWVudC5uYW1lfTpgLCBlcnJvcilcclxuICAgICAgICBcclxuICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICByZWNpcGllbnQ6IHtcclxuICAgICAgICAgICAgbmFtZTogcmVjaXBpZW50Lm5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsOiByZWNpcGllbnQuZW1haWwsXHJcbiAgICAgICAgICAgIGlkOiByZWNpcGllbnQuaWQsXHJcbiAgICAgICAgICAgIHdhbGxldDogcmVjaXBpZW50LndhbGxldFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGRpc3RyaWJ1dGlvbjoge1xyXG4gICAgICAgICAgICBob3Vyc1dvcmtlZDogcmVjaXBpZW50Lmhyc1dvcmtlZCxcclxuICAgICAgICAgICAgdG9rZW5zRGlzdHJpYnV0ZWQ6IDAsXHJcbiAgICAgICAgICAgIHJhdGU6ICcxIHRva2VuIHBlciBob3VyJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBzdWNjZXNzZnVsQ291bnQgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3VjY2VzcykubGVuZ3RoXHJcbiAgICBjb25zdCBmYWlsZWRDb3VudCA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gIXIuc3VjY2VzcykubGVuZ3RoXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBCdWxrIGRpc3RyaWJ1dGlvbiBjb21wbGV0ZWQ6ICR7c3VjY2Vzc2Z1bENvdW50fSBzdWNjZXNzZnVsLCAke2ZhaWxlZENvdW50fSBmYWlsZWRgKVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzdWx0c1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGluc3RhbmNlXHJcbmxldCB0b2tlblNlcnZpY2VJbnN0YW5jZTogVG9rZW5TZXJ2aWNlIHwgbnVsbCA9IG51bGxcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlblNlcnZpY2UoKTogVG9rZW5TZXJ2aWNlIHtcclxuICBpZiAoIXRva2VuU2VydmljZUluc3RhbmNlKSB7XHJcbiAgICB0b2tlblNlcnZpY2VJbnN0YW5jZSA9IG5ldyBUb2tlblNlcnZpY2UoKVxyXG4gIH1cclxuICByZXR1cm4gdG9rZW5TZXJ2aWNlSW5zdGFuY2VcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc3RyaWJ1dGVUb2tlbnMocmVjaXBpZW50QWRkcmVzczogc3RyaW5nLCBhbW91bnQ6IG51bWJlciwgbWV0YWRhdGE6IGFueSA9IHt9KSB7XHJcbiAgY29uc3QgdG9rZW5TZXJ2aWNlID0gZ2V0VG9rZW5TZXJ2aWNlKClcclxuICByZXR1cm4gYXdhaXQgdG9rZW5TZXJ2aWNlLmRpc3RyaWJ1dGVUb2tlbnMocmVjaXBpZW50QWRkcmVzcywgYW1vdW50LCBtZXRhZGF0YSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc3RyaWJ1dGVUb2tlbnNCdWxrKHJlY2lwaWVudHM6IEFycmF5PHtuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGlkOiBzdHJpbmcsIHdhbGxldDogc3RyaW5nLCBocnNXb3JrZWQ6IG51bWJlcn0+KSB7XHJcbiAgY29uc3QgdG9rZW5TZXJ2aWNlID0gZ2V0VG9rZW5TZXJ2aWNlKClcclxuICByZXR1cm4gYXdhaXQgdG9rZW5TZXJ2aWNlLmRpc3RyaWJ1dGVUb2tlbnNCdWxrKHJlY2lwaWVudHMpXHJcbn0iXSwibmFtZXMiOlsiZXRoZXJzIiwiRVJDMjBfQUJJIiwiVG9rZW5TZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJycGNVcmwiLCJwcm9jZXNzIiwiZW52IiwiUlBDX1VSTCIsImNoYWluSWQiLCJDSEFJTl9JRCIsInByaXZhdGVLZXkiLCJQUklWQVRFX0tFWSIsInRva2VuQ29udHJhY3RBZGRyZXNzIiwiVE9LRU5fQ09OVFJBQ1RfQUREUkVTUyIsIkVycm9yIiwicHJvdmlkZXIiLCJKc29uUnBjUHJvdmlkZXIiLCJ3YWxsZXQiLCJXYWxsZXQiLCJ0b2tlbkNvbnRyYWN0IiwiQ29udHJhY3QiLCJkaXN0cmlidXRlVG9rZW5zIiwicmVjaXBpZW50QWRkcmVzcyIsImFtb3VudCIsIm1ldGFkYXRhIiwiY29uc29sZSIsImxvZyIsImlzQWRkcmVzcyIsImRlY2ltYWxzIiwidG9rZW5BbW91bnQiLCJwYXJzZVVuaXRzIiwidG9TdHJpbmciLCJiYWxhbmNlIiwiYmFsYW5jZU9mIiwiYWRkcmVzcyIsImZvcm1hdFVuaXRzIiwiZ2FzRXN0aW1hdGUiLCJ0cmFuc2ZlciIsImVzdGltYXRlR2FzIiwiZmVlRGF0YSIsImdldEZlZURhdGEiLCJnYXNMaW1pdCIsImdhc1ByaWNlIiwidHgiLCJoYXNoIiwicmVjZWlwdCIsIndhaXQiLCJibG9ja051bWJlciIsImV4cGxvcmVyVXJsIiwidHJhbnNhY3Rpb25IYXNoIiwiZ2FzVXNlZCIsInN0YXR1cyIsInJlY2lwaWVudCIsIm5ldHdvcmsiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRUb2tlbkluZm8iLCJuYW1lIiwic3ltYm9sIiwiUHJvbWlzZSIsImFsbCIsImNvbnRyYWN0QWRkcmVzcyIsImdldFdhbGxldEJhbGFuY2UiLCJkaXN0cmlidXRlVG9rZW5zQnVsayIsInJlY2lwaWVudHMiLCJyZXN1bHRzIiwibGVuZ3RoIiwiaSIsInRva2Vuc1RvRGlzdHJpYnV0ZSIsIk1hdGgiLCJmbG9vciIsImhyc1dvcmtlZCIsInRyYW5zYWN0aW9uUmVzdWx0IiwiZW1haWwiLCJpZCIsInB1c2giLCJzdWNjZXNzIiwiZGlzdHJpYnV0aW9uIiwiaG91cnNXb3JrZWQiLCJ0b2tlbnNEaXN0cmlidXRlZCIsInJhdGUiLCJ0cmFuc2FjdGlvbiIsInN1Y2Nlc3NmdWxDb3VudCIsImZpbHRlciIsInIiLCJmYWlsZWRDb3VudCIsInRva2VuU2VydmljZUluc3RhbmNlIiwiZ2V0VG9rZW5TZXJ2aWNlIiwidG9rZW5TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/tokenService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ethers","vendor-chunks/@noble","vendor-chunks/aes-js","vendor-chunks/@adraffy"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdistribute-tokens%2Froute&page=%2Fapi%2Fdistribute-tokens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdistribute-tokens%2Froute.ts&appDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWork%5CKnightVault%5Ctoken-distribution-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();